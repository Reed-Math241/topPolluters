---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

<!-- You'll still need to render `README.Rmd` regularly, to keep `README.md` up-to-date. `devtools::build_readme()` is handy for this.  -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# Top Climate, Air, and Water Polluters (2018)

<!-- badges: start -->
<!-- badges: end -->

Researchers at the Political Economy Research Institute (PERI) at the University of Massachusetts Amherst created this all encompassing dataset on the top 100 parent entities or corporations that contributed to greenhouse gas pollution, air pollution, and water pollution. 

## Installation

The development version of XXX is available from [GitHub](https://github.com/) with:
```{r}
install.packages("devtools")
install.packages("topPolluters")
```
## Example



```{r example}
library(topPolluters)
library(tidyr)
library(ggplot2)
library(viridis)
topPolluters
topPolluters[1:12, ] %>%
  pivot_longer(!polluter, names_to = "Metric", values_to = "Value") %>%
  filter( grepl('rank', Metric)) %>%
  mutate(text = fct_reorder(Metric, Value)) %>%
  ggplot(aes(fill = polluter, y = Value, x = Metric)) +
  geom_bar(position = "dodge", stat = "identity") +
  scale_fill_viridis(discrete = T, option = "E") +
  ggtitle("Pollution Metrics By Firm") +
  facet_wrap(~polluter) +
  theme(legend.position = "none") +
  xlab("") +
  theme(axis.text.x = element_text(angle = -90, hjust = 0))
```
```{r example}
topPolluters
topPolluters[1:12, ] %>%
  pivot_longer(!polluter, names_to = "Metric", values_to = "Value") %>%
  filter( grepl('poor', Metric)) %>%
  mutate(text = fct_reorder(Metric, Value)) %>%
  ggplot(aes(fill = polluter, y = Value, x = Metric)) +
  geom_bar(position = "dodge", stat = "identity") +
  scale_fill_viridis(discrete = T, option = "E") +
  ggtitle("Pollution Metrics By Firm") +
  facet_wrap(~polluter) +
  theme(legend.position = "none") +
  xlab("") +
  theme(axis.text.x = element_text(angle = -90, hjust = 0))
```
```{r example}
topPolluters
topPolluters[1:12, ] %>%
  pivot_longer(!polluter, names_to = "Metric", values_to = "Value") %>%
  filter( grepl('minority', Metric)) %>%
  mutate(text = fct_reorder(Metric, Value)) %>%
  ggplot(aes(fill = polluter, y = Value, x = Metric)) +
  geom_bar(position = "dodge", stat = "identity") +
  scale_fill_viridis(discrete = T, option = "E") +
  ggtitle("Pollution Metrics By Firm") +
  facet_wrap(~polluter) +
  theme(legend.position = "none") +
  xlab("") +
  theme(axis.text.x = element_text(angle = -90, hjust = 0))
```
#devtools::build_readme()

